---
title: "Async Mode"
description: "Enable asynchronous web server functionality for OTA updates in ElegantOTA. Learn about the benefits, recommended dependencies, and how to enable async mode for different platforms including ESP8266, ESP32, and RP2040."
---

import { Callout, Tabs } from 'nextra/components'

# Async Mode

ElegantOTA includes an async mode feature, enabling asynchronous web server functionality for managing OTA updates. When async mode is enabled, ElegantOTA utilizes ESPAsyncWebServer to handle all HTTP routes.

<Callout>
This mode should only be enabled if you are using ESPAsyncWebServer library in your project/firmware. You **cannot** run synchronous `WebServer` and `ESPAsyncWebServer` libraries together in the same firmware.
</Callout>

## Recommended Dependencies

**Install dependencies based on your platform:**

<Tabs items={['ESP8266', 'ESP32', 'RP2040+W', 'RP2350+W']}>
   <Tabs.Tab>
      - (ESP32Async) [ESPAsyncTCP](https://github.com/ESP32Async/ESPAsyncTCP#v2.0.0) - **v2.0.0**
      - (ESP32Async) [ESPAsyncWebServer](https://github.com/ESP32Async/ESPAsyncWebServer#v3.7.3) - **v3.7.3**
   </Tabs.Tab>
   <Tabs.Tab>
      - (ESP32Async) [AsyncTCP](https://github.com/ESP32Async/AsyncTCP#v3.3.7) @ **v3.3.7**
      - (ESP32Async) [ESPAsyncWebServer](https://github.com/ESP32Async/ESPAsyncWebServer#v3.7.3) - **v3.7.3**
   </Tabs.Tab>
   <Tabs.Tab>
      - (ayushsharma82) [RPAsyncTCP](https://github.com/ayushsharma82/RPAsyncTCP#v1.3.2) @ **v1.3.2**
      - (ESP32Async) [ESPAsyncWebServer](https://github.com/ESP32Async/ESPAsyncWebServer#v3.7.3) - **v3.7.3**
   </Tabs.Tab>
   <Tabs.Tab>
      - (ayushsharma82) [RPAsyncTCP](https://github.com/ayushsharma82/RPAsyncTCP#v1.3.2) @ **v1.3.2**
      - (ESP32Async) [ESPAsyncWebServer](https://github.com/ESP32Async/ESPAsyncWebServer#v3.7.3) - **v3.7.3**
   </Tabs.Tab>
</Tabs>

<br/>

## Use of Unrecommended Dependencies (Experimental)

Incase your project is strictly dependent on a fork of dependency which is not listed above, you need to follow these steps **if you are using PlatformIO**:

1. Please make sure to install ElegantOTA 'manually' using the steps provided in [installation guide](/installation)

2. Open `library.json` file in ElegantOTA library folder and delete the `dependencies` parameter. This will disable auto installation of recommended dependencies.

<br/>

## Enabling Async Mode

**Please follow the steps based on your platform:**

<Tabs items={['Arduino IDE', 'PlatformIO']}>
   <Tabs.Tab>
      When using Arduino IDE, you will have to enable async mode by editing a line inside ElegantOTA library as Arduino IDE doesn't currently provide us with any way to set build flags.

      1. Go to your Arduino libraries directory
      2. Open `ElegantOTA` folder and then open `src` folder
      3. Locate the `ELEGANTOTA_USE_ASYNC_WEBSERVER` macro in the `ElegantOTA.h` file, and set it to `1`:

         ```cpp
         #define ELEGANTOTA_USE_ASYNC_WEBSERVER 1
         ```

      4. Save the changes to the `ElegantOTA.h` file.

      5. You are now ready to use ElegantOTA in async mode for your OTA updates, utilizing the ESPAsyncWebServer library.
   </Tabs.Tab>
   <Tabs.Tab>
      When using PlatformIO, we can use a neat trick! You can set `build_flags` in your `platformio.ini` file that enables Async Mode of ElegantOTA.

      1. Open `platformio.ini` file of your project
      2. Paste this line `build_flags=-DELEGANTOTA_USE_ASYNC_WEBSERVER=1` at bottom
      3. Done!

      PlatformIO will now compile ElegantOTA in Async Mode!
   </Tabs.Tab>
</Tabs>

<br/>

## Benefits of Async Mode

Enabling async mode for ElegantOTA offers several advantages:

1. **Non-blocking Operation:** In async mode, ElegantOTA leverages the asynchronous web server capabilities of ESPAsyncWebServer. This means that OTA updates won't block your device's main loop. It allows your device to continue executing other tasks while handling OTA updates in the background.

2. **Improved Responsiveness:** Your device can remain responsive to user interactions or other processes during OTA updates, ensuring a smoother user experience.